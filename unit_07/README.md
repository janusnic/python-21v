# python-21v

# Подключение модуля из стандартной библиотеки

<pre>
Подключить модуль можно с помощью инструкции import:
import os # модуль os для получения текущей директории
os.getcwd() # 'C:\\Python33'

Одной инструкцией можно подключить несколько модулей.
import time, random
time.time() # 1376047104.056417
random.random() # 0.9874550833306869

После импортирования модуля его название становится переменной, через которую можно получить доступ к атрибутам модуля. 

import math
math.e # 2.718281828459045

если указанный атрибут модуля не будет найден, возбудится исключение AttributeError. А если не удастся найти модуль для импортирования, то ImportError.

import notexist

# Функция dir()
Встроенная функция dir() используется для получения имён, определённых в модуле. Она возвращает отсортированный список строк

# Использование псевдонимов
Если название модуля слишком длинное, то для него можно создать псевдоним, с помощью ключевого слова as.

import math as m

from math import e, ceil as c
e # 2.718281828459045
c(4.6) # 5

Импортируемые атрибуты можно разместить на нескольких строках, если их много:
from math import (sin, cos,
          tan, atan)

from позволяет подключить все переменные из модуля. 
from sys import *

# Создание своего модуля на Python
Создадим файл mymodule.py, в которой определим какие-нибудь функции:

def hello():
    print('Hello, world!')
def fib(n):
    a = b = 1
    for i in range(n - 2):
        a, b = b, a + b
    return b

Теперь в этой же папке создадим другой файл, например, main.py:

import mymodule
mymodule.hello()
print(mymodule.fib(10))

# Модуль sys

Модуль sys обеспечивает доступ к некоторым переменным и функциям, взаимодействующим с интерпретатором python.

sys.argv - список аргументов командной строки, передаваемых сценарию Python. sys.argv[0] является именем скрипта (пустой строкой в интерактивной оболочке).

sys.byteorder - порядок байтов. Будет иметь значение 'big' при порядке следования битов от старшего к младшему, и 'little', если наоборот (младший байт первый).

sys.builtin_module_names - кортеж строк, содержащий имена всех доступных модулей.

sys.call_tracing(функция, аргументы) - вызывает функцию с аргументами и включенной трассировкой, в то время как трассировка включена.

sys.copyright - строка, содержащая авторские права, относящиеся к интерпретатору Python.

sys._clear_type_cache() - очищает внутренний кэш типа.

sys._current_frames() - возвращает словарь-отображение идентификатора для каждого потока в верхнем кадре стека в настоящее время в этом потоке в момент вызова функции.

sys.dllhandle - целое число, определяющее дескриптор DLL Python (Windows).

sys.exc_info() - возвращает кортеж из трех значений, которые дают информацию об исключенях, обрабатывающихся в данный момент.

sys.exec_prefix - каталог установки Python.

sys.executable - путь к интерпретатору Python.

sys.exit([arg]) - выход из Python. Возбуждает исключение SystemExit, которое может быть перехвачено.

sys.flags - флаги командной строки. Атрибуты только для чтения.

sys.float_info - информация о типе данных float.

sys.float_repr_style - информация о применении встроенной функции repr() для типа float.

sys.getdefaultencoding() - возвращает используемую кодировку.

sys.getdlopenflags() - значения флагов для вызовов dlopen().

sys.getfilesystemencoding() - возвращает кодировку файловой системы.

sys.getrefcount(object) - возвращает количество ссылок на объект. Аргумент функции getrefcount - еще одна ссылка на объект.

sys.getrecursionlimit() - возвращает лимит рекурсии.

sys.getsizeof(object[, default]) - возвращает размер объекта (в байтах).

sys.getswitchinterval() - интервал переключения потоков.

sys.getwindowsversion() - возвращает кортеж, описывающий версию Windows.

sys.hash_info - информация о параметрах хэширования.

sys.hexversion - версия python как шестнадцатеричное число (для 3.2.2 final это будет 30202f0).

sys.implementation - объект, содержащий информацию о запущенном интерпретаторе python.

sys.int_info - информация о типе int.

sys.intern(строка) - возвращает интернированную строку.

sys.last_type, sys.last_value, sys.last_traceback - информация об обрабатываемых исключениях. По смыслу похоже на sys.exc_info().

sys.maxsize - максимальное значение числа типа Py_ssize_t (2:sup:31 на 32-битных и 263 на 64-битных платформах).

sys.maxunicode - максимальное число бит для хранения символа Unicode.

sys.modules - словарь имен загруженных модулей. Изменяем, поэтому можно позабавиться :)

sys.path - список путей поиска модулей.

sys.path_importer_cache - словарь-кэш для поиска объектов.

sys.platform - информация об операционной системе.

Linux (2.x and 3.x)	'linux'
Windows	'win32'
Windows/Cygwin	'cygwin'
Mac OS X	'darwin'
OS/2	'os2'
OS/2 EMX	'os2emx'
sys.prefix - папка установки интерпретатора python.

sys.ps1, sys.ps2 - первичное и вторичное приглашение интерпретатора (определены только если интерпретатор находится в интерактивном режиме). По умолчанию sys.ps1 == ">>> ", а sys.ps2 == "... ".

sys.dont_write_bytecode - если true, python не будет писать .pyc файлы.

sys.setdlopenflags(flags) - установить значения флагов для вызовов dlopen().

sys.setrecursionlimit(предел) - установить максимальную глубину рекурсии.

sys.setswitchinterval(интервал) - установить интервал переключения потоков.

sys.settrace(tracefunc) - установить "след" функции.

sys.stdin - стандартный ввод.

sys.stdout - стандартный вывод.

sys.stderr - стандартный поток ошибок.

sys.__stdin__, sys.__stdout__, sys.__stderr__ - исходные значения потоков ввода, вывода и ошибок.

sys.tracebacklimit - максимальное число уровней отслеживания.

sys.version - версия python.

sys.api_version - версия C API.

sys.version_info - Кортеж, содержащий пять компонентов номера версии.

sys.warnoptions - реализация предупреждений.

sys.winver - номер версии python, использующийся для формирования реестра Windows.


# Модуль os

Модуль os предоставляет множество функций для работы с операционной системой, причём их поведение, как правило, не зависит от ОС, поэтому программы остаются переносимыми. Здесь будут приведены наиболее часто используемые из них.

Будьте внимательны: некоторые функции из этого модуля поддерживаются не всеми ОС.

os.name - имя операционной системы. Доступные варианты: 'posix', 'nt', 'mac', 'os2', 'ce', 'java'.

os.environ - словарь переменных окружения. Изменяемый (можно добавлять и удалять переменные окружения).

os.getlogin() - имя пользователя, вошедшего в терминал (Unix).

os.getpid() - текущий id процесса.

os.uname() - информация об ОС. возвращает объект с атрибутами: sysname - имя операционной системы, nodename - имя машины в сети (определяется реализацией), release - релиз, version - версия, machine - идентификатор машины.

os.access(path, mode, *, dir_fd=None, effective_ids=False, follow_symlinks=True) - проверка доступа к объекту у текущего пользователя. Флаги: os.F_OK - объект существует, os.R_OK - доступен на чтение, os.W_OK - доступен на запись, os.X_OK - доступен на исполнение.

os.chdir(path) - смена текущей директории.

os.chmod(path, mode, *, dir_fd=None, follow_symlinks=True) - смена прав доступа к объекту (mode - восьмеричное число).

os.chown(path, uid, gid, *, dir_fd=None, follow_symlinks=True) - меняет id владельца и группы (Unix).

os.getcwd() - текущая рабочая директория.

os.link(src, dst, *, src_dir_fd=None, dst_dir_fd=None, follow_symlinks=True) - создаёт жёсткую ссылку.

os.listdir(path=".") - список файлов и директорий в папке.

os.mkdir(path, mode=0o777, *, dir_fd=None) - создаёт директорию. OSError, если директория существует.

os.makedirs(path, mode=0o777, exist_ok=False) - создаёт директорию, создавая при этом промежуточные директории.

os.remove(path, *, dir_fd=None) - удаляет путь к файлу.

os.rename(src, dst, *, src_dir_fd=None, dst_dir_fd=None) - переименовывает файл или директорию из src в dst.

os.renames(old, new) - переименовывает old в new, создавая промежуточные директории.

os.replace(src, dst, *, src_dir_fd=None, dst_dir_fd=None) - переименовывает из src в dst с принудительной заменой.

os.rmdir(path, *, dir_fd=None) - удаляет пустую директорию.

os.removedirs(path) - удаляет директорию, затем пытается удалить родительские директории, и удаляет их рекурсивно, пока они пусты.

os.symlink(source, link_name, target_is_directory=False, *, dir_fd=None) - создаёт символическую ссылку на объект.

os.sync() - записывает все данные на диск (Unix).

os.truncate(path, length) - обрезает файл до длины length.

os.utime(path, times=None, *, ns=None, dir_fd=None, follow_symlinks=True) - модификация времени последнего доступа и изменения файла. Либо times - кортеж (время доступа в секундах, время изменения в секундах), либо ns - кортеж (время доступа в наносекундах, время изменения в наносекундах).

os.walk(top, topdown=True, onerror=None, followlinks=False) - генерация имён файлов в дереве каталогов, сверху вниз (если topdown равен True), либо снизу вверх (если False). Для каждого каталога функция walk возвращает кортеж (путь к каталогу, список каталогов, список файлов).

os.system(command) - исполняет системную команду.

os.urandom(n) - n случайных байт. Возможно использование этой функции в криптографических целях.

os.path - модуль, реализующий некоторые полезные функции на работы с путями.

# Модуль os.path

os.path является вложенным модулем в модуль os, и реализует некоторые полезные функции на работы с путями.

os.path.abspath(path) - возвращает нормализованный абсолютный путь.

os.path.basename(path) - базовое имя пути (эквивалентно os.path.split(path)[1]).

os.path.commonprefix(list) - возвращает самый длинный префикс всех путей в списке.

os.path.dirname(path) - возвращает имя директории пути path.

os.path.exists(path) - возвращает True, если path указывает на существующий путь или дескриптор открытого файла.

os.path.expanduser(path) - заменяет ~ или ~user на домашнюю директорию пользователя.

os.path.expandvars(path) - возвращает аргумент с подставленными переменными окружения ($name или ${name} заменяются переменной окружения name). Несуществующие имена не заменяет. На Windows также заменяет %name%.

os.path.getatime(path) - время последнего доступа к файлу, в секундах.

os.path.getmtime(path) - время последнего изменения файла, в секундах.

os.path.getctime(path) - время создания файла (Windows), время последнего изменения файла (Unix).

os.path.getsize(path) - размер файла в байтах.

os.path.isabs(path) - является ли путь абсолютным.

os.path.isfile(path) - является ли путь файлом.

os.path.isdir(path) - является ли путь директорией.

os.path.islink(path) - является ли путь символической ссылкой.

os.path.ismount(path) - является ли путь точкой монтирования.

os.path.join(path1[, path2[, ...]]) - соединяет пути с учётом особенностей операционной системы.

os.path.normcase(path) - нормализует регистр пути (на файловых системах, не учитывающих регистр, приводит путь к нижнему регистру).

os.path.normpath(path) - нормализует путь, убирая избыточные разделители и ссылки на предыдущие директории. На Windows преобразует прямые слеши в обратные.

os.path.realpath(path) - возвращает канонический путь, убирая все символические ссылки (если они поддерживаются).

os.path.relpath(path, start=None) - вычисляет путь относительно директории start (по умолчанию - относительно текущей директории).

os.path.samefile(path1, path2) - указывают ли path1 и path2 на один и тот же файл или директорию.

os.path.sameopenfile(fp1, fp2) - указывают ли дескрипторы fp1 и fp2 на один и тот же открытый файл.

os.path.split(path) - разбивает путь на кортеж (голова, хвост), где хвост - последний компонент пути, а голова - всё остальное. Хвост никогда не начинается со слеша (если путь заканчивается слешем, то хвост пустой). Если слешей в пути нет, то пустой будет голова.

os.path.splitdrive(path) - разбивает путь на пару (привод, хвост).

os.path.splitext(path) - разбивает путь на пару (root, ext), где ext начинается с точки и содержит не более одной точки.

os.path.supports_unicode_filenames - поддерживает ли файловая система Unicode.

import os.path
os.path.join("/tmp/1", "temp.file")  # конкатенация путей '/tmp/1/temp.file'
os.path.dirname("/tmp/1/temp.file")  # имя каталога по заданному полному пути '/tmp/1'
os.path.basename("/tmp/1/temp.file")  # имя файла по заданному полному пути 'temp.file'
os.path.normpath("/tmp//2/../1/temp.file")  # нормализация пути '/tmp/1/temp.file'
os.path.exists("/tmp/1/temp.file")  # существует ли путь? False

